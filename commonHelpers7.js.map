{"version":3,"file":"commonHelpers7.js","sources":["../src/js/news-service.js","../src/js/load-more-btn.js","../src/newsApi.js"],"sourcesContent":["const API_KEY = '4330ebfabc654a6992c2aa792f3173a3';\nconst BASE_URL = 'https://newsapi.org/v2';\nconst options = {\n    headers: {\n        Authorization: API_KEY,\n    },\n};\n\nexport default class NewsApiService {\n    constructor() {\n        this.searchQuery;\n        this.page = 1;\n    }\n\n    fetchArticles() {\n        const url = `${BASE_URL}/everything?q=${this.searchQuery}&language=en&pageSize=4&page=${this.page}`;\n\n        return fetch(url, options) \n        .then(response => response.json())\n        .then(({ articles }) => {\n            this.incrementPage();\n            return articles;\n        })\n    }\n\n    incrementPage() {\n        this.page += 1;\n    }\n\n    resetPage() {\n        this.page = 1;\n    }\n\n    get query() {\n        return this.searchQuery;\n    }\n\n    set query(newQuery) {\n        this.searchQuery = newQuery;\n    }\n\n}","export default class LoadMoreBtn {\n    constructor({ selector, hidden = false }) {\n        this.refs = this.getRefs(selector);\n        \n        hidden && this.hide();\n    }\n\n    getRefs(selector) {\n        const refs = {};\n        refs.button = document.querySelector(selector);\n        refs.label = refs.button.querySelector('.label');\n        refs.spinner = refs.button.querySelector('.spinner');\n\n        return refs;\n    }\n\n    enable() {\n        this.refs.button.disabled = false;\n        this.refs.label.textContent = 'Show more';\n        this.refs.spinner.classList.add('is-hidden');\n    }\n\n    disable() {\n        this.refs.button.disabled = true;\n        this.refs.label = 'Loading';\n        this.refs.spinner.classList.remove('is-hidden');\n    }\n\n    show() {\n        this.refs.button.classList.remove('is-hidden');\n    }\n\n    hide() {\n        this.refs.button.classList.add('is-hidden');\n    }\n}","/*\n * - Pagination\n * - Page and Per-page\n * -  Loading (Fetch) articles on Form Submit\n * -  Loading (Fetch) articles on Load More Button Click\n * - Обновляем страницу в параметрах запроса - Reloading page in request parameters\n * - Рисуем статьи - Drawing HTML articles appearance\n * - Сброс значения при поиске по новому критерию - Reset input value while new search request\n *\n * https://newsapi.org/\n * 4330ebfabc654a6992c2aa792f3173a3\n * http://newsapi.org/v2/everything?q=cat&language=en&pageSize=5&page=1\n */\n\nimport './css/style.css';\nimport './css/news-api.css';\nimport NewsApiService from './js/news-service';\nimport LoadMoreBtn from './js/load-more-btn';\nimport SimpleLightbox from \"simplelightbox\";\n\nconst refs = {\n    searchForm: document.querySelector('.js-search-form'),\n    articlesContainer: document.querySelector('.js-articles-container'),\n    searchBtn: document.querySelector('.search-btn'),\n  };\n  const loadMoreBtn = new LoadMoreBtn({\n    selector: '[data-action=\"load-more\"]',\n    hidden: true,\n  });\n  const newsApiService = new NewsApiService();\n  \n  refs.searchForm.addEventListener('submit', onSearch);\n  loadMoreBtn.refs.button.addEventListener('click', fetchArticles);\n  \n\n  function onSearch(e) {\n    e.preventDefault();\n  \n    newsApiService.query = e.currentTarget.elements.query.value;\n  \n    if (newsApiService.query === '') {\n    return alert('Put your search query!');\n  }\n \n  loadMoreBtn.show();\n  newsApiService.resetPage();\n  clearArticlesContainer();\n  fetchArticles();\n  refs.searchBtn.disabled = true;\n}\n\nfunction fetchArticles() {\n  loadMoreBtn.disable();\n  newsApiService.fetchArticles().then(articles => {\n    appendArticlesMarkup(articles);\n    loadMoreBtn.enable();\n  });\n}\n\nfunction appendArticlesMarkup(articles) {\n  \n  const markup = articles\n    .map(\n      ({ url, urlToImage, title, author, description }) => `\n  <li>\n    <a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n      <article>\n        <img src=\"${urlToImage}\" alt=\"\" width=\"480\">\n        <h2>${title}</h2>\n        <p>Posted by: ${author}</p>\n        <p>${description}</p>\n      </article>\n    </a>\n  </li>`\n    )\n    .join('');\n\n  refs.articlesContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearArticlesContainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n"],"names":["API_KEY","BASE_URL","options","NewsApiService","url","response","articles","newQuery","LoadMoreBtn","selector","hidden","refs","loadMoreBtn","newsApiService","onSearch","fetchArticles","e","clearArticlesContainer","appendArticlesMarkup","markup","urlToImage","title","author","description"],"mappings":"2HAAA,MAAMA,EAAU,mCACVC,EAAW,yBACXC,EAAU,CACZ,QAAS,CACL,cAAeF,CAClB,CACL,EAEe,MAAMG,CAAe,CAChC,aAAc,CACV,KAAK,YACL,KAAK,KAAO,CACf,CAED,eAAgB,CACZ,MAAMC,EAAM,GAAGH,CAAQ,iBAAiB,KAAK,WAAW,gCAAgC,KAAK,IAAI,GAEjG,OAAO,MAAMG,EAAKF,CAAO,EACxB,KAAKG,GAAYA,EAAS,MAAM,EAChC,KAAK,CAAC,CAAE,SAAAC,MACL,KAAK,cAAa,EACXA,EACV,CACJ,CAED,eAAgB,CACZ,KAAK,MAAQ,CAChB,CAED,WAAY,CACR,KAAK,KAAO,CACf,CAED,IAAI,OAAQ,CACR,OAAO,KAAK,WACf,CAED,IAAI,MAAMC,EAAU,CAChB,KAAK,YAAcA,CACtB,CAEL,CCzCe,MAAMC,CAAY,CAC7B,YAAY,CAAE,SAAAC,EAAU,OAAAC,EAAS,EAAK,EAAI,CACtC,KAAK,KAAO,KAAK,QAAQD,CAAQ,EAEjCC,GAAU,KAAK,MAClB,CAED,QAAQD,EAAU,CACd,MAAME,EAAO,CAAA,EACb,OAAAA,EAAK,OAAS,SAAS,cAAcF,CAAQ,EAC7CE,EAAK,MAAQA,EAAK,OAAO,cAAc,QAAQ,EAC/CA,EAAK,QAAUA,EAAK,OAAO,cAAc,UAAU,EAE5CA,CACV,CAED,QAAS,CACL,KAAK,KAAK,OAAO,SAAW,GAC5B,KAAK,KAAK,MAAM,YAAc,YAC9B,KAAK,KAAK,QAAQ,UAAU,IAAI,WAAW,CAC9C,CAED,SAAU,CACN,KAAK,KAAK,OAAO,SAAW,GAC5B,KAAK,KAAK,MAAQ,UAClB,KAAK,KAAK,QAAQ,UAAU,OAAO,WAAW,CACjD,CAED,MAAO,CACH,KAAK,KAAK,OAAO,UAAU,OAAO,WAAW,CAChD,CAED,MAAO,CACH,KAAK,KAAK,OAAO,UAAU,IAAI,WAAW,CAC7C,CACL,CCfA,MAAMA,EAAO,CACT,WAAY,SAAS,cAAc,iBAAiB,EACpD,kBAAmB,SAAS,cAAc,wBAAwB,EAClE,UAAW,SAAS,cAAc,aAAa,CACnD,EACQC,EAAc,IAAIJ,EAAY,CAClC,SAAU,4BACV,OAAQ,EACZ,CAAG,EACKK,EAAiB,IAAIV,EAE3BQ,EAAK,WAAW,iBAAiB,SAAUG,CAAQ,EACnDF,EAAY,KAAK,OAAO,iBAAiB,QAASG,CAAa,EAG/D,SAASD,EAASE,EAAG,CAKnB,GAJAA,EAAE,eAAc,EAEhBH,EAAe,MAAQG,EAAE,cAAc,SAAS,MAAM,MAElDH,EAAe,QAAU,GAC7B,OAAO,MAAM,wBAAwB,EAGvCD,EAAY,KAAI,EAChBC,EAAe,UAAS,EACxBI,IACAF,IACAJ,EAAK,UAAU,SAAW,EAC5B,CAEA,SAASI,GAAgB,CACvBH,EAAY,QAAO,EACnBC,EAAe,cAAa,EAAG,KAAKP,GAAY,CAC9CY,EAAqBZ,CAAQ,EAC7BM,EAAY,OAAM,CACtB,CAAG,CACH,CAEA,SAASM,EAAqBZ,EAAU,CAEtC,MAAMa,EAASb,EACZ,IACC,CAAC,CAAE,IAAAF,EAAK,WAAAgB,EAAY,MAAAC,EAAO,OAAAC,EAAQ,YAAAC,CAAW,IAAO;AAAA;AAAA,eAE5CnB,CAAG;AAAA;AAAA,oBAEEgB,CAAU;AAAA,cAChBC,CAAK;AAAA,wBACKC,CAAM;AAAA,aACjBC,CAAW;AAAA;AAAA;AAAA,QAInB,EACA,KAAK,EAAE,EAEVZ,EAAK,kBAAkB,mBAAmB,YAAaQ,CAAM,CAC/D,CAEA,SAASF,GAAyB,CAChCN,EAAK,kBAAkB,UAAY,EACrC"}